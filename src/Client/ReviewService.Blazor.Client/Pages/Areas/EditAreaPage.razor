@page "/editArea/{AreaId:int}"
@if (area is null)
{
    <Loading />
}
else
{
    <MudContainer MaxWidth="MaxWidth.False">
        <MudPaper Elevation="14" Class="px-4 mt-8 ml-8 mr-8">
            <EditForm @ref="@editForm" Model="@area">
                <FluentValidationValidator />
                <MudGrid>
                    <MudItem xs="12" sm="4">
                        <MudTextField Label="Name: " @bind-Value="@area.Name" For="@(()=>area.Name)" />
                    </MudItem>
                    <MudItem xs="12" sm="4">
                        <MudTextField Label="Description" @bind-Value="@area.Description" For="@(() => area.Description)" />
                    </MudItem>
                </MudGrid>
            </EditForm>

        </MudPaper>
        <MudPaper Elevation="14" Class="px-4 mt-8 ml-8 mr-8">
            <EditForm Model="@areaItem" OnValidSubmit="@AddRowClicked">
                <FluentValidationValidator />
                <MudGrid>
                    <MudItem xs="12" sm="4">
                        <MudTextField Label="Area item name: " @bind-Value="@areaItem.Name" For="@(()=>areaItem.Name)" />
                    </MudItem>
                    <MudItem xs="12" sm="4">
                        <MudTextField Label="Area item description" @bind-Value="@areaItem.Description" For="@(() => areaItem.Description)" />
                    </MudItem>
                    <MudButton ButtonType="ButtonType.Submit" Size="Size.Small" Variant="Variant.Outlined" Color="Color.Primary" Class="ml-auto mt-2 mb-2 mr-2">Add area item row</MudButton>
                </MudGrid>
            </EditForm>
        </MudPaper>
        <MudTable Items="@area.AreaItems" Hover="true" Breakpoint="Breakpoint.None" Class="px-4 mt-8 ml-8 mr-8" Elevation="14">
            <HeaderContent>
                <MudTh>Name</MudTh>
                <MudTh>Action</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Name">@context.Name</MudTd>
                <MudTd DataLabel="Action">
                    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Text" Color="Color.Error" Class="ml-auto" OnClick="() => DeleteRow(context)">Delete</MudButton>
                </MudTd>
            </RowTemplate>
        </MudTable>
    </MudContainer>
    <ErrorMessage @ref="@errorMessage" />
    @*<Footer OnPrimaryButtonClicked="@OnSaveClicked" OnSecondaryButtonClicked="@OnCancelClicked"></Footer>*@
}
